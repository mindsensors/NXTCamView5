

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>class UART – duplex serial communication bus &mdash; MicroPython 1.8 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
  

  
    <link rel="top" title="MicroPython 1.8 documentation" href="../index.html"/>
        <link rel="up" title="MicroPython libraries" href="index.html"/>
        <link rel="next" title="class USB_VCP – USB virtual comm port" href="pyb.USB_VCP.html"/>
        <link rel="prev" title="class Timer – control internal timers" href="pyb.Timer.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> MicroPython
          

          
            
            <img src="../_static/web-logo-sticky.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/tutorial/index.html">OpenMV Cam Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">MicroPython libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#python-standard-libraries-and-micro-libraries">Python standard libraries and micro-libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#micropython-specific-libraries">MicroPython-specific libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#libraries-specific-to-the-openmv-cam">Libraries specific to the OpenMV Cam</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="pyb.html"><code class="docutils literal"><span class="pre">pyb</span></code> &#8212; functions related to the board</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pyb.html#time-related-functions">Time related functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyb.html#reset-related-functions">Reset related functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyb.html#interrupt-related-functions">Interrupt related functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyb.html#power-related-functions">Power related functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyb.html#miscellaneous-functions">Miscellaneous functions</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="pyb.html#classes">Classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pyb.ADC.html">class ADC &#8211; analog to digital conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.CAN.html">class CAN &#8211; controller area network communication bus</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.DAC.html">class DAC &#8211; digital to analog conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.ExtInt.html">class ExtInt &#8211; configure I/O pins to interrupt on external events</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.I2C.html">class I2C &#8211; a two-wire serial protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.LED.html">class LED &#8211; LED object</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.Pin.html">class Pin &#8211; control I/O pins</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.Servo.html">class Servo &#8211; 3-wire hobby servo driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.SPI.html">class SPI &#8211; a master-driven serial protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.Timer.html">class Timer &#8211; control internal timers</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyb.Timer.html#class-timerchannel-setup-a-channel-for-a-timer">class TimerChannel &#8212; setup a channel for a timer</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">class UART &#8211; duplex serial communication bus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#constructors">Constructors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#constants">Constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="#flow-control">Flow Control</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pyb.USB_VCP.html">class USB_VCP &#8211; USB virtual comm port</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.time.html"><code class="docutils literal"><span class="pre">time</span></code> &#8212; tracking elapsed time</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.sensor.html"><code class="docutils literal"><span class="pre">sensor</span></code> &#8212; camera sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html"><code class="docutils literal"><span class="pre">image</span></code> &#8212; machine vision</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-haarcascade-feature-descriptor">class HaarCascade &#8211; Feature Descriptor</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-histogram-histogram-object">class Histogram &#8211; Histogram Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-percentile-percentile-object">class Percentile &#8211; Percentile Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-statistics-statistics-object">class Statistics &#8211; Statistics Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-blob-blob-object">class Blob &#8211; Blob object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-qrcode-qrcode-object">class QRCode &#8211; QRCode object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-apriltag-apriltag-object">class AprilTag &#8211; AprilTag object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-barcode-barcode-object">class BarCode &#8211; BarCode object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html#class-image-image-object">class Image &#8211; Image object</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.gif.html"><code class="docutils literal"><span class="pre">gif</span></code> &#8212; gif recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.gif.html#class-gif-gif-recorder">class Gif &#8211; Gif recorder</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.mjpeg.html"><code class="docutils literal"><span class="pre">mjpeg</span></code> &#8212; mjpeg recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.mjpeg.html#class-mjpeg-mjpeg-recorder">class Mjpeg &#8211; Mjpeg recorder</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.lcd.html"><code class="docutils literal"><span class="pre">lcd</span></code> &#8212; lcd shield driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.fir.html"><code class="docutils literal"><span class="pre">fir</span></code> &#8212; thermopile shield driver (fir == far infrared)</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.cpufreq.html"><code class="docutils literal"><span class="pre">cpufreq</span></code> &#8212; easy cpu frequency control</a></li>
<li class="toctree-l3"><a class="reference internal" href="machine.html"><code class="docutils literal"><span class="pre">machine</span></code> &#8212; functions related to the board</a></li>
<li class="toctree-l3"><a class="reference internal" href="machine.I2C.html">class I2C &#8211; a two-wire serial protocol</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">The MicroPython language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MicroPython license information</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">MicroPython</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">MicroPython libraries</a> &raquo;</li>
      
    <li>class UART &#8211; duplex serial communication bus</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/library/pyb.UART.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="class-uart-duplex-serial-communication-bus">
<span id="pyb-uart"></span><h1>class UART &#8211; duplex serial communication bus<a class="headerlink" href="#class-uart-duplex-serial-communication-bus" title="Permalink to this headline">¶</a></h1>
<p>UART implements the standard UART/USART duplex serial communications protocol. At
the physical level it consists of 2 lines: RX and TX. The unit of communication
is a character (not to be confused with a string character) which can be 8 or 9
bits wide.</p>
<p>UART objects can be created and initialized using:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyb</span> <span class="kn">import</span> <span class="n">UART</span>

<span class="n">uart</span> <span class="o">=</span> <span class="n">UART</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">9600</span><span class="p">)</span>                         <span class="c"># init with given baudrate</span>
<span class="n">uart</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="mi">9600</span><span class="p">,</span> <span class="n">bits</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">parity</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c"># init with given parameters</span>
</pre></div>
</div>
<p>Bits can be 7, 8 or 9. Parity can be None, 0 (even) or 1 (odd). Stop can be 1 or 2.</p>
<p><em>Note:</em> with parity=None, only 8 and 9 bits are supported. With parity enabled,
only 7 and 8 bits are supported.</p>
<p>A UART object acts like a stream object and reading and writing is done
using the standard stream methods:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">uart</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>       <span class="c"># read 10 characters, returns a bytes object</span>
<span class="n">uart</span><span class="o">.</span><span class="n">readall</span><span class="p">()</span>      <span class="c"># read all available characters</span>
<span class="n">uart</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>     <span class="c"># read a line</span>
<span class="n">uart</span><span class="o">.</span><span class="n">readinto</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>  <span class="c"># read and store into the given buffer</span>
<span class="n">uart</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span>   <span class="c"># write the 3 characters</span>
</pre></div>
</div>
<p>Individual characters can be read/written using:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">uart</span><span class="o">.</span><span class="n">readchar</span><span class="p">()</span>     <span class="c"># read 1 character and returns it as an integer</span>
<span class="n">uart</span><span class="o">.</span><span class="n">writechar</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>  <span class="c"># write 1 character</span>
</pre></div>
</div>
<p>To check if there is anything to be read, use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">uart</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>          <span class="c"># returns the number of characters waiting</span>
</pre></div>
</div>
<p><em>Note:</em> The stream functions <code class="docutils literal"><span class="pre">read</span></code>, <code class="docutils literal"><span class="pre">write</span></code>, etc. are new in MicroPython v1.3.4.
Earlier versions use <code class="docutils literal"><span class="pre">uart.send</span></code> and <code class="docutils literal"><span class="pre">uart.recv</span></code>.</p>
<div class="section" id="constructors">
<h2>Constructors<a class="headerlink" href="#constructors" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">pyb.</code><code class="descname">UART</code><span class="sig-paren">(</span><em>bus</em>, <em>...</em><span class="sig-paren">)</span></dt>
<dd><p>Construct a UART object on the given bus. <code class="docutils literal"><span class="pre">bus</span></code> can be 3.
With no additional parameters, the UART object is created but not
initialized (it has the settings from the last initialization of
the bus, if any). If extra arguments are given, the bus is initialized.
See <code class="docutils literal"><span class="pre">init</span></code> for parameters of initialization.</p>
<p>The physical pins of the UART buses are:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">UART(3)</span></code>: <code class="docutils literal"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(P4,</span> <span class="pre">P5)</span> <span class="pre">=</span> <span class="pre">(PB10,</span> <span class="pre">PB11)</span></code></li>
</ul>
</div></blockquote>
<p>On the OpenMV Cam M7:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">UART(1)</span></code>: <code class="docutils literal"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(P1,</span> <span class="pre">P0)</span> <span class="pre">=</span> <span class="pre">(PB14,</span> <span class="pre">PB15)</span></code></li>
<li><code class="docutils literal"><span class="pre">UART(3)</span></code>: <code class="docutils literal"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(P4,</span> <span class="pre">P5)</span> <span class="pre">=</span> <span class="pre">(PB10,</span> <span class="pre">PB11)</span></code></li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt>
<code class="descclassname">uart.</code><code class="descname">init</code><span class="sig-paren">(</span><em>baudrate</em>, <em>bits=8</em>, <em>parity=None</em>, <em>stop=1</em>, <em>*</em>, <em>timeout=1000</em>, <em>flow=0</em>, <em>timeout_char=0</em>, <em>read_buf_len=64</em><span class="sig-paren">)</span></dt>
<dd><p>Initialize the UART bus with the given parameters:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">baudrate</span></code> is the clock rate.</li>
<li><code class="docutils literal"><span class="pre">bits</span></code> is the number of bits per character, 7, 8 or 9.</li>
<li><code class="docutils literal"><span class="pre">parity</span></code> is the parity, <code class="docutils literal"><span class="pre">None</span></code>, 0 (even) or 1 (odd).</li>
<li><code class="docutils literal"><span class="pre">stop</span></code> is the number of stop bits, 1 or 2.</li>
<li><code class="docutils literal"><span class="pre">flow</span></code> sets the flow control type. Can be 0, <code class="docutils literal"><span class="pre">UART.RTS</span></code>, <code class="docutils literal"><span class="pre">UART.CTS</span></code>
or <code class="docutils literal"><span class="pre">UART.RTS</span> <span class="pre">|</span> <span class="pre">UART.CTS</span></code>.</li>
<li><code class="docutils literal"><span class="pre">timeout</span></code> is the timeout in milliseconds to wait for the first character.</li>
<li><code class="docutils literal"><span class="pre">timeout_char</span></code> is the timeout in milliseconds to wait between characters.</li>
<li><code class="docutils literal"><span class="pre">read_buf_len</span></code> is the character length of the read buffer (0 to disable).</li>
</ul>
</div></blockquote>
<p>This method will raise an exception if the baudrate could not be set within
5% of the desired value. The minimum baudrate is dictated by the frequency
of the bus that the UART is on; UART(1) is on APB2, UART(3) is on
APB1. The default bus frequencies give a minimum baudrate of 1300 for
UART(1) and 650 for the others. Use <a class="reference internal" href="pyb.html#pyb.freq" title="pyb.freq"><code class="xref py py-func docutils literal"><span class="pre">pyb.freq</span></code></a>
to reduce the bus frequencies to get lower baudrates.</p>
<p><em>Note:</em> with parity=None, only 8 and 9 bits are supported. With parity enabled,
only 7 and 8 bits are supported.</p>
</dd></dl>

<dl class="method">
<dt id="uart.deinit">
<code class="descclassname">uart.</code><code class="descname">deinit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uart.deinit" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn off the UART bus.</p>
</dd></dl>

<dl class="method">
<dt id="uart.any">
<code class="descclassname">uart.</code><code class="descname">any</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uart.any" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of bytes waiting (may be 0).</p>
</dd></dl>

<dl class="method">
<dt id="uart.writechar">
<code class="descclassname">uart.</code><code class="descname">writechar</code><span class="sig-paren">(</span><em>char</em><span class="sig-paren">)</span><a class="headerlink" href="#uart.writechar" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a single character on the bus. <code class="docutils literal"><span class="pre">char</span></code> is an integer to write.
Return value: <code class="docutils literal"><span class="pre">None</span></code>. See note below if CTS flow control is used.</p>
</dd></dl>

<dl class="method">
<dt id="uart.read">
<code class="descclassname">uart.</code><code class="descname">read</code><span class="sig-paren">(</span><span class="optional">[</span><em>nbytes</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#uart.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read characters. If <code class="docutils literal"><span class="pre">nbytes</span></code> is specified then read at most that many bytes.
If <code class="docutils literal"><span class="pre">nbytes</span></code> are available in the buffer, returns immediately, otherwise returns
when sufficient characters arrive or the timeout elapses.</p>
<p><em>Note:</em> for 9 bit characters each character takes two bytes, <code class="docutils literal"><span class="pre">nbytes</span></code> must
be even, and the number of characters is <code class="docutils literal"><span class="pre">nbytes/2</span></code>.</p>
<p>Return value: a bytes object containing the bytes read in. Returns <code class="docutils literal"><span class="pre">None</span></code>
on timeout.</p>
</dd></dl>

<dl class="method">
<dt id="uart.readall">
<code class="descclassname">uart.</code><code class="descname">readall</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uart.readall" title="Permalink to this definition">¶</a></dt>
<dd><p>Read as much data as possible. Returns after the timeout has elapsed.</p>
<p>Return value: a bytes object or <code class="docutils literal"><span class="pre">None</span></code> if timeout prevents any data being read.</p>
</dd></dl>

<dl class="method">
<dt id="uart.readchar">
<code class="descclassname">uart.</code><code class="descname">readchar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uart.readchar" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive a single character on the bus.</p>
<p>Return value: The character read, as an integer. Returns -1 on timeout.</p>
</dd></dl>

<dl class="method">
<dt id="uart.readinto">
<code class="descclassname">uart.</code><code class="descname">readinto</code><span class="sig-paren">(</span><em>buf</em><span class="optional">[</span>, <em>nbytes</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#uart.readinto" title="Permalink to this definition">¶</a></dt>
<dd><p>Read bytes into the <code class="docutils literal"><span class="pre">buf</span></code>. If <code class="docutils literal"><span class="pre">nbytes</span></code> is specified then read at most
that many bytes. Otherwise, read at most <code class="docutils literal"><span class="pre">len(buf)</span></code> bytes.</p>
<p>Return value: number of bytes read and stored into <code class="docutils literal"><span class="pre">buf</span></code> or <code class="docutils literal"><span class="pre">None</span></code> on
timeout.</p>
</dd></dl>

<dl class="method">
<dt id="uart.readline">
<code class="descclassname">uart.</code><code class="descname">readline</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uart.readline" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a line, ending in a newline character. If such a line exists, return is
immediate. If the timeout elapses, all available data is returned regardless
of whether a newline exists.</p>
<p>Return value: the line read or <code class="docutils literal"><span class="pre">None</span></code> on timeout if no data is available.</p>
</dd></dl>

<dl class="method">
<dt id="uart.write">
<code class="descclassname">uart.</code><code class="descname">write</code><span class="sig-paren">(</span><em>buf</em><span class="sig-paren">)</span><a class="headerlink" href="#uart.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the buffer of bytes to the bus. If characters are 7 or 8 bits wide
then each byte is one character. If characters are 9 bits wide then two
bytes are used for each character (little endian), and <code class="docutils literal"><span class="pre">buf</span></code> must contain
an even number of bytes.</p>
<p>Return value: number of bytes written. If a timeout occurs and no bytes
were written returns <code class="docutils literal"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="uart.sendbreak">
<code class="descclassname">uart.</code><code class="descname">sendbreak</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uart.sendbreak" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a break condition on the bus. This drives the bus low for a duration
of 13 bits.</p>
<p>Return value: <code class="docutils literal"><span class="pre">None</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="constants">
<h2>Constants<a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="UART.RTS">
<code class="descclassname">UART.</code><code class="descname">RTS</code><a class="headerlink" href="#UART.RTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="data">
<dt id="UART.CTS">
<code class="descclassname">UART.</code><code class="descname">CTS</code><a class="headerlink" href="#UART.CTS" title="Permalink to this definition">¶</a></dt>
<dd><p>to select the flow control type.</p>
</dd></dl>

</div>
<div class="section" id="flow-control">
<h2>Flow Control<a class="headerlink" href="#flow-control" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">UART(3)</span></code> support RTS/CTS hardware flow control using the following pins:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">UART(3)</span></code> is on :<code class="docutils literal"><span class="pre">(TX,</span> <span class="pre">RX,</span> <span class="pre">nRTS,</span> <span class="pre">nCTS)</span> <span class="pre">=</span> <span class="pre">(P4,</span> <span class="pre">P5,</span> <span class="pre">P1,</span> <span class="pre">P2)</span> <span class="pre">=</span> <span class="pre">(PB10,</span> <span class="pre">PB11,</span> <span class="pre">PB14,</span> <span class="pre">PB13)</span></code></li>
</ul>
</div></blockquote>
<p>In the following paragraphs the term &#8220;target&#8221; refers to the device connected to
the UART.</p>
<p>When the UART&#8217;s <code class="docutils literal"><span class="pre">init()</span></code> method is called with <code class="docutils literal"><span class="pre">flow</span></code> set to one or both of
<code class="docutils literal"><span class="pre">UART.RTS</span></code> and <code class="docutils literal"><span class="pre">UART.CTS</span></code> the relevant flow control pins are configured.
<code class="docutils literal"><span class="pre">nRTS</span></code> is an active low output, <code class="docutils literal"><span class="pre">nCTS</span></code> is an active low input with pullup
enabled. To achieve flow control the OpenMV Cam&#8217;s <code class="docutils literal"><span class="pre">nCTS</span></code> signal should be connected
to the target&#8217;s <code class="docutils literal"><span class="pre">nRTS</span></code> and the OpenMV Cam&#8217;s <code class="docutils literal"><span class="pre">nRTS</span></code> to the target&#8217;s <code class="docutils literal"><span class="pre">nCTS</span></code>.</p>
<div class="section" id="cts-target-controls-openmv-cam-transmitter">
<h3>CTS: target controls OpenMV Cam transmitter<a class="headerlink" href="#cts-target-controls-openmv-cam-transmitter" title="Permalink to this headline">¶</a></h3>
<p>If CTS flow control is enabled the write behavior is as follows:</p>
<p>If the OpenMV Cam&#8217;s <code class="docutils literal"><span class="pre">uart.write(buf)</span></code> method is called, transmission will stall for
any periods when <code class="docutils literal"><span class="pre">nCTS</span></code> is <code class="docutils literal"><span class="pre">False</span></code>. This will result in a timeout if the entire
buffer was not transmitted in the timeout period. The method returns the number of
bytes written, enabling the user to write the remainder of the data if required. In
the event of a timeout, a character will remain in the UART pending <code class="docutils literal"><span class="pre">nCTS</span></code>. The
number of bytes composing this character will be included in the return value.</p>
<p>If <code class="docutils literal"><span class="pre">uart.writechar()</span></code> is called when <code class="docutils literal"><span class="pre">nCTS</span></code> is <code class="docutils literal"><span class="pre">False</span></code> the method will time
out unless the target asserts <code class="docutils literal"><span class="pre">nCTS</span></code> in time. If it times out <code class="docutils literal"><span class="pre">OSError</span> <span class="pre">116</span></code>
will be raised. The character will be transmitted as soon as the target asserts <code class="docutils literal"><span class="pre">nCTS</span></code>.</p>
</div>
<div class="section" id="rts-openmv-cam-controls-target-s-transmitter">
<h3>RTS: OpenMV Cam controls target&#8217;s transmitter<a class="headerlink" href="#rts-openmv-cam-controls-target-s-transmitter" title="Permalink to this headline">¶</a></h3>
<p>If RTS flow control is enabled, behavior is as follows:</p>
<p>If buffered input is used (<code class="docutils literal"><span class="pre">read_buf_len</span></code> &gt; 0), incoming characters are buffered.
If the buffer becomes full, the next character to arrive will cause <code class="docutils literal"><span class="pre">nRTS</span></code> to go
<code class="docutils literal"><span class="pre">False</span></code>: the target should cease transmission. <code class="docutils literal"><span class="pre">nRTS</span></code> will go <code class="docutils literal"><span class="pre">True</span></code> when
characters are read from the buffer.</p>
<p>Note that the <code class="docutils literal"><span class="pre">any()</span></code> method returns the number of bytes in the buffer. Assume a
buffer length of <code class="docutils literal"><span class="pre">N</span></code> bytes. If the buffer becomes full, and another character arrives,
<code class="docutils literal"><span class="pre">nRTS</span></code> will be set False, and <code class="docutils literal"><span class="pre">any()</span></code> will return the count <code class="docutils literal"><span class="pre">N</span></code>. When
characters are read the additional character will be placed in the buffer and will
be included in the result of a subsequent <code class="docutils literal"><span class="pre">any()</span></code> call.</p>
<p>If buffered input is not used (<code class="docutils literal"><span class="pre">read_buf_len</span></code> == 0) the arrival of a character will
cause <code class="docutils literal"><span class="pre">nRTS</span></code> to go <code class="docutils literal"><span class="pre">False</span></code> until the character is read.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pyb.USB_VCP.html" class="btn btn-neutral float-right" title="class USB_VCP – USB virtual comm port" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pyb.Timer.html" class="btn btn-neutral" title="class Timer – control internal timers" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2017, Damien P. George, OpenMV LLC, and contributors.
      Last updated on 27 Mar 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  <!--
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Ports and Versions</span>
    openmvcam (latest)
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Ports</dt>
      
        <dd><a href="//en/latest/unix">unix</a></dd>
      
        <dd><a href="//en/latest/pyboard">pyboard</a></dd>
      
        <dd><a href="//en/latest/wipy">wipy</a></dd>
      
        <dd><a href="//en/latest/esp8266">esp8266</a></dd>
      
        <dd><a href="//en/latest/openmvcam">openmvcam</a></dd>
      
    </dl>
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="//en/latest/openmvcam">latest</a></dd>
      
    </dl>
    -->
    <!--
    <dl>
      <dt>Downloads</dt>
      
    </dl>
    -->
    <!--
    <hr/>
    <dl>
      <dt>External links</dt>
        <dd>
          <a href="http://www.micropython.org">micropython.org</a>
        </dd>
        <dd>
          <a href="http://github.com/micropython/micropython">GitHub</a>
        </dd>
    </dl>
  </div>
</div>
-->

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.8',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>